### 아이템26. 타입 추론에는 문맥이 어떻게 사용되는지 이해하기

타입 추론: 단순히 값만 고려하지는 않음. → 값이 존재하는 문맥까지 고려함.

- 타입스크립트는 할당 시점 기준으로 타입을 추론함.

오류가 나지 않게 해결하는 방법

- 타입 선언을 하여 변수가 가능한 타입을 제한함. (오타를 표시해주기도 함.)
- 변수가 아닌 상수로 선언함. → 문자열 리터럴로 추론하므로 타입 체크를 통과함.

⇒ 문맥과 값을 분리하는 문제가 있음.

- 튜플 사용 시 주의점
  - 배열 타입(number[])은 튜플과 맞지 않는 요소를 가질 수 있으므로 [number, number] 튜플에 할당할 수 없음.
    - any를 사용하여 해결할 수 있음.
    - **상수 문맥**
      - const 선언: 값이 가리키는 참조가 변하지 않는 얕은 상수
      - as const: 그 값의 내부까지 상수라는 것을 타입스크립트에게 알려줌. ⇒ readonly로 동작함.
    - 하지만 때로 readonly는 과하게 정확해짐. → 타입 시그니처를 애초에 readonly 구문을 추가하여 동작하게 함. 타입 정의에 실수가 있다면 오류가 정의되는 곳이 아닌 호출되는 곳에서 발생함. ⇒ 원인 파악하기 어려워짐.
    - 타입 시그니처를 사용할 수 없는 경우라면 타입 구문을 이용해야 함.
- 객체 사용 시 주의점
  - 타입이 문자열 리터럴인 경우, string 타입으로 객체를 선언했을 때 오류가 발생함. → 객체에서 타입 선언을 추가하거나 상수 단언을 사용해야 함.
- 콜백 사용 시 주의점
  - 타입스크립트는 콜백의 매개변수 타입을 추론하기 위해 사용함.
  - 콜백을 상수로 이용하면, 매개변수에 타입 구문을 추가하여 이용함. (가능하면 전체 함수 표현식에 적용함.)
